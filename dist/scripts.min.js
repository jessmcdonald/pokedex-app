var pokemonRepository=function(){var e=[],n="https://pokeapi.co/api/v2/pokemon/?limit=200";function t(n){e.push(n)}function i(e){var n=document.querySelector("#modal-container");n.innerHTML="";var t=document.createElement("div");t.classList.add("pokemonmodal");var i=document.createElement("button");i.classList.add("pokemonmodal-close"),i.innerText="Close",i.addEventListener("click",o);var s=document.createElement("h1");s.innerText=e.name;var r=document.createElement("p");r.innerHTML=`<b>Height:</b> ${pokemonRepository.getPokemonHeight(e.height)}\n  <br><b>Types:</b> ${pokemonRepository.getPokemonTypes(e.types)}\n  <br><img src="${e.imageUrl}">`,t.appendChild(i),t.appendChild(s),t.appendChild(r),n.appendChild(t),n.classList.add("is-visible")}function o(){document.querySelector("#modal-container").classList.remove("is-visible")}function s(e){pokemonRepository.loadDetails(e).then(function(){i(e)})}return window.addEventListener("keydown",e=>{var n=document.querySelector("#modal-container");"Escape"===e.key&&n.classList.contains("is-visible")&&o()}),document.querySelector("#modal-container").addEventListener("click",e=>{e.target===document.querySelector("#modal-container")&&o()}),{add:t,getAll:function(){return e},getPokemonTypes:function(e){let n="";return e.includes("bug")&&(n+='<img src="img/types/Bug.png">'),e.includes("dark")&&(n+='<img src="img/types/Dark.png">'),e.includes("dragon")&&(n+='<img src="img/types/Dragon.png">'),e.includes("electric")&&(n+='<img src="img/types/Electric.png">'),e.includes("fairy")&&(n+='<img src="img/types/Fairy.png">'),e.includes("fighting")&&(n+='<img src="img/types/Fighting.png">'),e.includes("fire")&&(n+='<img src="img/types/Fire.png">'),e.includes("ghost")&&(n+='<img src="img/types/Ghost.png">'),e.includes("grass")&&(n+='<img src="img/types/Grass.png">'),e.includes("ground")&&(n+='<img src="img/types/Ground.png">'),e.includes("ice")&&(n+='<img src="img/types/Ice.png">'),e.includes("normal")&&(n+='<img src="img/types/Normal.png">'),e.includes("poison")&&(n+='<img src="img/types/Poison.png">'),e.includes("psychic")&&(n+='<img src="img/types/Psychic.png">'),e.includes("rock")&&(n+='<img src="img/types/Rock.png">'),e.includes("steel")&&(n+='<img src="img/types/Steel.png">'),e.includes("water")&&(n+='<img src="img/types/Water.png">'),n},getPokemonHeight:function(e){return e>20?e/10+"m (woah that's big!)<br>":e<10?e/10+"m (small one!)<br>":e/10+"m<br>"},addListItem:function(e){var n=document.querySelector(".pokemon-list"),t=document.createElement("li"),i=document.createElement("button");n.appendChild(t),i.innerText=e.name,t.appendChild(i),i.classList.add("name-button"),i.addEventListener("click",function(){s(e)})},showDetails:s,loadList:function(){return fetch(n).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t(e={name:e.name,detailsUrl:e.url,height:e.height,types:e.types})})}).catch(function(e){console.error(e)})},loadDetails:function(e){var n=e.detailsUrl;return fetch(n).then(function(e){return e.json()}).then(function(n){e.imageUrl=n.sprites.front_default,e.height=n.height,e.types=[],n.types.forEach(function(n){e.types.push(n.type.name)})}).catch(function(e){console.error(e)})},showPokemonModal:i,hidePokemonModal:o,searchFunction:function(){var e,n,t,i;for(e=document.getElementById("pokeSearchInput").value.toUpperCase(),n=document.querySelector(".pokemon-list").getElementsByTagName("li"),i=0;i<n.length;i++)((t=n[i].getElementsByTagName("button")[0]).textContent||t.innerText).toUpperCase().indexOf(e)>-1?n[i].style.display="":n[i].style.display="none"}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
